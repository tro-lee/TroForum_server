# 尝试论坛网站制作，前后端分离开发，制作思路
### 前端实现功能有：
+ 1.用户注册与登录界面（配合后端实现token检查）
+ 2.主题帖与回复贴基本功能实现
+ 3.用户个人信息界面
+ 4.关注系统
+ 5.消息通知
> 前端通过umi搭建基本框架，使用umi的基本目录，service下统一存放接口方法，pages对应页面，components对应公共组件
>
> 使用tailwindcss来手动装饰组件，对页面组件进行抽象化，使得页面组件更加简洁，同时搭配ts实现动态样式
>
>使用dockerfile来进行前端的打包，使用portainer进行容器管理

### 后端采用DDD架构：
+ 接口层:提供Account,Chat,Login,Post,Relation相关接口
+ 应用层:为接口服务，同时提供websocket相关服务
+ 领域层:提供Account,Chat,Login,Post,Relation相关领域模型
+ 基础层:配置基本信息，配置拦截器，对发来信息和发出信息统一处理
> 后端使用gradle进行构建，使用springboot进行基本配置，使用mybatis-plus进行数据库操作，使用saToken进行token操作，使用websocket进行消息通知
>
> 使用dockerfile进行后端的打包，使用portainer进行容器管理

### 对重要实现进行解释
#### 0.前后端拦截器
1.通过拦截器对后端发来的信息进行处理，可以对code进行判断，对于不同的code进行不同的处理，同时进行身份验证

2.后端对发出信息统一打包，对抛出异常与正常发送进行不同的统一处理

#### 1.用户注册与登录界面
1.注册系统对密码进行加密，密码等级检测，用户名检测（保证唯一用户名与唯一id）

2.*登录系统，录入用户名与密码，后端进行密码验证，验证通过后返回token，前端将token存入cookie中，
后端将token存入缓存中，前端每次请求都会带上token，后端通过拦截器对token进行验证，验证通过后放行，验证失败后返回错误信息*

#### 2.关键主题帖与回复贴实现
> 主页帖子展示无限滚动实现:
> 主页的TopicPostBubble，通过对滚轮条与视窗高度的判断，来实现无限加载，同时根据帖子id进行颜色渲染
>
> 回复逻辑：
> 通过属性master与masterUserId实现多级回复，后端进行相关逻辑处理后返回给前端，前端进行渲染
>
> 帖子页数：
> 通过page类进行分页，前端传入当前页数，后端进行分页处理，返回给前端

#### 4.关注系统
> 通过关注系统，实现用户关注与取消关注，同时实现用户关注列表与粉丝列表
> 使用userId与followerId进行拼接出relationId，来快速获取与判断关系，使用relation属性type对关系进行分类

#### 5.消息通知
后端使用spring支持的websocket进行消息通知，通过stomp进行消息传输，前端使用react-stomp进行消息接收，
实现聊天部分实时聊天，关注用户实时通知
